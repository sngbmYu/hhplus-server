# 콘서트 예약 서비스 ERD

---

![ERD](erd.png)
### [사이트에서 확인](https://www.erdcloud.com/d/CEhw9CcuihD4dqEdF)

---
## 관계 설명
#### 회원-잔액 (1..1)
한 회원이 여러 잔고(ex. 외화 계좌)를 가질 수도 있겠지만, 현재 요구사항에는 일대일 관계가 적절하다고 판단했습니다.
#### 콘서트 정보-좌석 정보 (1..N)
하나의 콘서트는 여러 날짜나 회차로 열릴 수 있으므로, 좌석 정보 테이블에 공연일(`DATETIME`)을 두어 일대다 관계로 설계했습니다.
또한 좌석이 없는 콘서트는 없으므로, 필수적인 관계로 설계했습니다.
#### 예약 헤더-예약 라인 (1..N)
한 번의 예약에 여러 좌석을 예약할 수 있으므로, 예약 정보를 헤더와 라인으로 분리하였습니다.
예약 헤더의 상태는 전체 예약의 진행 상황을, 예약 라인의 상태는 각 좌석의 점유 상태를 나타냅니다.
#### 회원-결제 (0..N)
회원과 결제는 Optional한 관계입니다. 결제가 회원 FK를 가지지 않고 예약을 통해 관계를 맺는 방법도 고려했으나, 
결제도 회원 FK를 가지는 것이 더 효율적이라고 생각했습니다.
#### 결제-예약 (1..1)
예약이 완료되기 위해서는 결제가 완료되어야 한다는 요구사항이 있으므로, 일대일 필수 관계로 설계했습니다.
단, 예약이 결제보다 선행되기 때문에, 예약 헤더에서 결제 FK는 `Nullable`하게 설계했습니다.
#### 회원-예약 (0..N)
회원과 예약은 결제와 마찬가지로 Optional한 일대다 관계입니다.